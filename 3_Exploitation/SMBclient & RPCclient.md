

## Windows

- CMD: `net use \\[IPv4]\ipc$ "" /user:""`
    - no PW, no User
    - ipc = Interprocess Communications Share
    - $ = administrative hidden share
    - Double check mounted shares with "net view"

## Kali smbclient

*Get Access*

- `smbclient  --no-pass \\\\IPv4\\`
- `smbclient -U [username] \\[IPv4]\ipc$`
- `smbclient -L [IPv4]` 
   - get list of shares on host

*After Access*
- `smb: \>  get "remote-file" [local-file-name]`
- `smb: \>  put [local-file-name] "remote-file"`

## Kali rpcclient

*Get Access*

- `rpcclient -U "username" [IPv4]`
- enter PW of "username"

*After Access*

- `rpcclient $> help (command overview)`
- `rpcclient $> enum (after successful login)`
- `rpcclient $> querydominfo`
- `rpcclient $> getdompwinfo`
- `rpcclient $> netshareenumall`

<br />

## SYSTEM Account Disadvantage 

- (!) NT AUTHORITY\SYSTEM allows full admin rights to local machine, not necessarily to shares other clients provide
- (!) Whereas as Admin, you can view remote shares and have admin right upon (as SYSTEM not)
   - while having active mpeter session:
   - meterpreter > use incognito
   - meterpreter > list_tokens -u
   - meterpreter > impersonate_token [admin]
